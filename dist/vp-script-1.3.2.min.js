$(document).ready(function(){function v(n){return n==="Swimlane"?c:n==="Phase"?l:a}function s(t){let r="";for(i=0;i<n.length;++i){const f=n[i],u=f.info;if(u.ContainerCategories&&u.ContainerText){const o=f.shape,n=o.getBoundingClientRect(),i=t.clientX,e=t.clientY;n.left<=i&&i<=n.right&&n.top<=e&&e<=n.bottom&&(r+="<div>"+v(u.ContainerCategories)+": <strong>"+u.ContainerText+"<\/strong><\/div>")}}u.innerHTML=r}var r,n,f,t;const h="http://www.w3.org/2000/svg";if(r=window.svgpublish||{},r.shapes&&r.enableContainerTip){var u=document.getElementById("container-tip"),c=u.dataset.labelswimlane||"Swimlane",l=u.dataset.labelphase||"Phase",a=u.dataset.labelcontainer||"Container";n=[];for(f in r.shapes){const i=document.getElementById(f),t=r.shapes[f];t.IsContainer&&n.push({shape:i,info:t})}let e=0,o=0;for(i=0;i<n.length;++i){const r=n[i],t=r.shape.getBBox();e<t.width&&(e=t.width);o<t.height&&(o=t.height)}for(i=0;i<n.length;++i){const c=n[i],u=c.info,r=c.shape,f=u.ContainerCategories;if(f){if(f==="Swimlane"||f==="Phase"){const n=r.getBBox();t=document.createElementNS(h,"rect");t.setAttribute("x",n.x);t.setAttribute("y",n.y);u.ContainerCategories==="Swimlane"?t.setAttribute("height",e):t.setAttribute("width",n.width);u.ContainerCategories==="Phase"?t.setAttribute("height",o):t.setAttribute("height",n.height);r.appendChild(t)}r.addEventListener("mousemove",s);r.addEventListener("mouseout",s)}}}}),function(n){n.selectionChanged=$.Callbacks()}(window.svgpublish);$(document).ready(function(){function r(t){let r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(var u=0;u<r.children.length;++u){let n=r.children[u];if(n.textContent.indexOf(i.ContainerText)>=0)return n}}var n=window.svgpublish,t,i;n.shapes&&n.enableHover&&(t=!n.enableBoxSelection,i="http://www.w3.org/2000/svg",$.each(n.shapes,function(u){let f=n.shapes[u];if(f.DefaultLink||f.Props&&Object.keys(f.Props).length||f.Links&&f.Links.length||f.Comment||f.PopoverMarkdown||f.SidebarMarkdown||f.TooltipMarkdown){let o=r(u);if(!o)return;if(t){var e=n.enableFollowHyperlinks&&f.DefaultLink?"url(#hyperlink)":"url(#hover)";o.addEventListener("mouseover",function(){n.selectedShapeId!==u&&o.setAttribute("filter",e)});o.addEventListener("mouseout",function(){n.selectedShapeId!==u&&o.removeAttribute("filter")})}else o.addEventListener("mouseover",function(){var t,r;if(n.selectedShapeId!==u){t=o.getBBox();n.filter&&n.filter.enableDilate&&(r=+n.filter.dilate||4,t.x-=r/2,t.width+=r,t.y-=r/2,t.height+=r);var s=n.filter&&n.filter.hyperlinkColor||"rgba(0, 0, 255, 0.2)",h=n.filter&&n.filter.hoverColor||"rgba(255, 255, 0, 0.2)",e=n.enableFollowHyperlinks&&f.DefaultLink?s:h;let u=document.createElementNS(i,"rect");u.id="vp-hover-box";u.setAttribute("x",t.x);u.setAttribute("y",t.y);u.setAttribute("width",t.width);u.setAttribute("height",t.height);u.setAttribute("pointer-events","none");u.style.fill=n.filter&&n.filter.mode==="normal"?"none":e;u.style.stroke=e;u.style.strokeWidth=r||0;o.appendChild(u)}}),o.addEventListener("mouseout",function(){if(n.selectedShapeId!==u){let n=document.getElementById("vp-hover-box");n&&n.remove()}})}}))});window.svgpublish&&(window.svgpublish.diagramData=window.svgpublish.shapes);$(document).ready(function(){var r=window.svgpublish||{},n,t,i;r.enableAutoFrameHeight&&(n=window.top.document.getElementById(window.name),n&&(t=n.parentElement,i=t.getBoundingClientRect(),t.style.height="calc(100vh - "+i.top+"px)"))});$(document).ready(function(){function u(t){return n.layers.filter(function(n){return n.Index===t})[0]}function t(){n.layers&&n.layers.length&&$.each(n.shapes,function(t,i){if(i.Layers&&i.Layers.length){var u=n.layers.some(function(n){return n.Visible&&i.Layers.indexOf(n.Index)>=0}),r=$("#"+t);u?r.show():r.hide()}})}function f(n){const t=Intl.Collator(undefined,{numeric:!0,sensitivity:"base"});return n.map(function(n){return n}).sort(function(n,i){return t.compare(n.Name,i.Name)})}function i(i){var r=new RegExp("("+i.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")+")","gi"),e=$("<table class='table borderless' />"),h=n.enableLayerSort?f(n.layers):n.layers,o,s;$.each(h,function(f,o){if(!i||r.test(o.Name)){var h=i?o.Name.replace(r,"<span class='search-hilight'>$1<\/span>"):o.Name,s=n.enableLayerToggles?$("<input type='checkbox' data-layer='"+o.Index+"' "+(o.Visible?"checked":"")+"><span style='margin-left:1em'>"+h+"<\/span><\/input>"):$("<div class='checkbox' style='margin-bottom: 0'><label><input type='checkbox' data-layer='"+o.Index+"' "+(o.Visible?"checked":"")+">"+h+"<\/label><\/div>"),c=n.enableLayerToggles?s:s.find("input");c.on(n.enableLayerToggles?"change.bootstrapSwitch":"click",function(n){var r=$(n.target).data("layer"),i=u(r);i.Visible=!i.Visible;t()});e.append($("<tr>").append($("<td>").append(s)))}});$("#panel-layers").html(e);n.enableLayerToggles&&(o=$("#panel-layers").data("ontext")||"ON",s=$("#panel-layers").data("offtext")||"OFF",$("#panel-layers").find("input").bootstrapSwitch({size:"small",onText:o,offText:s,labelWidth:0}))}function r(t){return n.layers.filter(function(n){return n.Name===t})[0]}var n=window.svgpublish||{};if(n.layers&&n.enableLayers){$("#shape-layers").show();n.isLayerVisible=function(n){var t=r(n);return t&&t.Visible};n.setLayerVisible=function(i,u){var e=r(i),f,o;e&&(f=$("#panel-layers").find("input[data-layer='"+e.Index+"']"),f.length?n.enableLayerToggles?(o=f.bootstrapSwitch("state"),!!o!=!!u&&f.bootstrapSwitch("toggleState")):(f.prop("checked",u),e.Visible=u,t()):(e.Visible=u,t()))};i("");$("#search-layer").on("keyup",function(){return i($("#search-layer").val()),!1})}});$(document).ready(function(){function i(t){let r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(var u=0;u<r.children.length;++u){let n=r.children[u];if(n.textContent.indexOf(i.ContainerText)>=0)return n}}function t(t){var i;if(t.Address)return t.Address;if(i=t.PageId,i>=0&&n.pages){var f=n.pages.filter(function(n){return n.Id===i})[0],r=location.pathname,e=r.replace(r.substring(r.lastIndexOf("/")+1),f.FileName),u=document.location.protocol+"//"+document.location.host+e;return t.ShapeId&&(u+="#?shape="+t.ShapeId),t.Zoom&&(u+=(t.ShapeId?"&":"#?")+"zoom="+t.Zoom),u}return"#"}function r(n){return n.Description?n.Description:n.SubAddress?n.Address?n.Address+"["+n.SubAddress+"]":n.SubAddress:n.Address}function u(i){var f=n.shapes[i],o=$("#panel-links").data("labelnolinks")||"No Shape Links",u=$("<span>"+o+"<\/span>"),e;f&&(u=$("<table class='table borderless' />"),e=u.append($("<tbody />")),$.each(f.Links,function(i,u){var o=t(u),s=r(u),f=$("<a />").attr("href",o).text(s);u.Address&&n.openHyperlinksInNewWindow&&f.attr("target","_blank");e.append($("<tr />").append($("<td />").append(f)))}));$("#panel-links").html(u)}var n=window.svgpublish||{};n.shapes&&($("#shape-links").show(),n.enableLinks&&n.selectionChanged.add(u),n.enableFollowHyperlinks)&&$.each(n.shapes,function(r){let u=n.shapes[r];var f=u.DefaultLink&&u.Links[u.DefaultLink-1],e=f&&t(f);if(e){let t=i(r);if(!t)return;t.style.cursor="pointer";t.addEventListener("click",function(t){(t.stopPropagation(),t&&t.ctrlKey)||(f.Address&&n.openHyperlinksInNewWindow||t.shiftKey?window.open(e,"_blank"):document.location=e)})}})});$(document).ready(function(){function i(n){const t=Intl.Collator(undefined,{numeric:!0,sensitivity:"base"});return n.map(function(n){return n}).sort(function(n,i){return t.compare(n.Name,i.Name)})}function t(t){var r=$('<ul class="nav nav-stacked nav-pills"/>'),u=n.enableLayerSort?i(n.pages):n.pages;$.each(u,function(i,u){var e=new RegExp("("+t.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")+")","gi");if(!t||e.test(u.Name)){var f=location.pathname,s=f.replace(f.substring(f.lastIndexOf("/")+1),u.FileName),h=document.location.protocol+"//"+document.location.host+s,c=t?u.Name.replace(e,"<span class='search-hilight'>$1<\/span>"):u.Name,l=$("<a />").attr("href",h).html(c),o=$("<li />");u.Id===n.currentPage.Id&&o.addClass("active");o.append(l).appendTo(r)}});$("#panel-pages").html(r)}var n=window.svgpublish||{};if(n.pages&&n.enablePages){$("#shape-pages").show();t("");$("#search-page").on("keyup",function(){return t($("#search-page").val()),!1})}});$(document).ready(function(){function i(t){let r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(var u=0;u<r.children.length;++u){let n=r.children[u];if(n.textContent.indexOf(i.ContainerText)>=0)return n}}var n=window.svgpublish||{},t;n.shapes&&n.enablePopovers&&(n.popoverKeepOnHover&&(t=$.fn.popover.Constructor.prototype.leave,$.fn.popover.Constructor.prototype.leave=function(n){var i=n instanceof this.constructor?n:$(n.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),r,u;if(t.call(this,n),n.currentTarget){r=$(n.currentTarget).data("bs.popover").tip();u=i.timeout;r.one("mouseenter",function(){clearTimeout(u);r.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(i,i)})})}}),$.each(n.shapes,function(t,r){var a,e,u,v;const o=$(i(t)),s=r.PopoverMarkdown||n.enablePopoverMarkdown&&n.popoverMarkdown||r.Comment||"",f=/([\s\S]*)^\s*----*\s*$([\s\S]*)/m.exec(s),h=f&&f[1]||"",c=f&&f[2]||s,y=h&&marked(Mustache.render(h,r)).trim()||"",l=c&&marked(Mustache.render(c,r)).trim()||"";if((a=n.popoverPlacement||"auto top",l)&&(e={container:"body",html:!0,title:y,content:l,placement:a},n.popoverTrigger&&(e.trigger=n.popoverTrigger),(n.popoverTimeout||n.popoverKeepOnHover)&&(e.delay={show:n.popoverTimeoutShow||undefined,hide:n.popoverTimeoutHide||n.popoverKeepOnHover?200:undefined}),o.popover(e),n.popoverUseMousePosition)){u={};$.fn.popover.Constructor.prototype.update=function(n){var c,r,l;u.pageX=n.pageX;u.pageY=n.pageY;var f=this.tip(),i=this.getPosition(),e=f[0].offsetWidth,o=f[0].offsetHeight,t=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,h=s.test(t);h&&(t=t.replace(s,"")||"top");h&&(c=t,r=this.getPosition(this.$viewport),t=t=="bottom"&&i.bottom+o>r.bottom?"top":t=="top"&&i.top-o<r.top?"bottom":t=="right"&&i.right+e>r.width?"left":t=="left"&&i.left-e<r.left?"right":t,f.removeClass(c).addClass(t));l=this.getCalculatedOffset(t,i,e,o);this.applyPlacement(l,t)};v=$.fn.popover.Constructor.prototype.getPosition;$.fn.popover.Constructor.prototype.getPosition=function(n){return n||typeof u.pageX!="number"||typeof u.pageY!="number"?v.call(this,n):{left:u.pageX,top:u.pageY,width:1,height:1}};o.on("mousemove",function(n){o.data("bs.popover").update(n)})}}),n.popoverOutsideClick&&$("div.svg").mouseup(function(t){$.each(n.shapes,function(n){var i=$("#"+n);i.is(t.target)||i.has(t.target).length!==0||$(".popover").has(t.target).length!==0||(((i.popover("hide").data("bs.popover")||{}).inState||{}).click=!1)})}))});$(document).ready(function(){function t(t){var r=n.shapes[t],u=$("#panel-props").data("labelnodata")||"No Shape Data",i=$("<span>"+u+"<\/span>");if(r){i=$("<table class='table table-bordered table-striped' />");var f=i.append($("<thead />")),e=i.append($("<tbody />")),o=$("#panel-props").data("labelproperty")||"Property",s=$("#panel-props").data("labelvalue")||"Value";f.append($("<tr />").append($("<th />").text(o)).append($("<th />").text(s)));$.each(r.Props,function(t,i){if(i||(i=""),i.indexOf("https://")>=0||i.indexOf("http://")>=0){var r=document.createElement("a");r.href=i;n.openHyperlinksInNewWindow&&(r.target="_blank");r.textContent=i;i=r.outerHTML}e.append($("<tr />").append($("<td />").text(t)).append($("<td />").html(i)))})}$("#panel-props").html(i)}var n=window.svgpublish||{};n.shapes&&n.enableProps&&($("#shape-props").show(),n.selectionChanged.add(t))});$(document).ready(function(){function s(n){return n.replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}function h(n){let t=document.createElement("select");t.className="selectpicker";t.setAttribute("multiple","multiple");t.setAttribute("data-container","body");t.setAttribute("data-live-search",!0);t.setAttribute("data-width","100%");t.setAttribute("title","Filter by property");for(var i of n){let n=document.createElement("option");n.innerText=i;t.appendChild(n)}return t}function o(t,i,r,u,f){var c,l,o,a,e,k,v,h,y,d;let w=s(t),g=new RegExp(w,"i");const b=n.searchIndex[i];for(c in b){l=b[c];let rt=[],it=[];for(o in l)if(!f.length||f.indexOf(o)>=0){let n=l[o];g.test(n)&&(it.push(n),rt.push(o))}if(it.length){let s=rt.join(", ");a=document.createElement("li");e=document.createElement("a");u&&(k=n.pages.filter(function(n){return n.Id===i})[0],s&&(s+=" / "),s+=k.Name);let ut=new RegExp("("+w+")","gi");if(v=document.createElement("div"),v.innerHTML=it.join(", ").replace(ut,"<span class='search-hilight'>$1<\/span>"),e.appendChild(v),s&&(h=document.createElement("div"),h.className="text-muted small",h.innerText=s,e.appendChild(h)),y=document.location.protocol+"//"+document.location.host+document.location.pathname,u){var nt=n.pages.filter(function(n){return n.Id===i})[0],p=location.pathname,tt=p.replace(p.substring(p.lastIndexOf("/")+1),nt.FileName);y=document.location.protocol+"//"+document.location.host+tt}d=y+"#?shape="+c+"&term="+encodeURIComponent(t);e.setAttribute("href",d);a.appendChild(e);r.appendChild(a)}}}function r(i){var r,v,f,s,h,c,e,l,a;const u=t?$(t).val():[];if(r=document.getElementById("panel-search-results"),r.innerHTML="",i||u.length){v=document.createElement("hr");r.appendChild(v);f=document.createElement("p");s=document.createElement("span");s.innerText=r.getAttribute("data-searchresults");f.appendChild(s);h=document.createElement("strong");h.innerText=" "+i+" ";f.appendChild(h);c=document.createElement("span");c.innerText=u.length?" ("+u.join(", ")+"):":":";f.appendChild(c);r.appendChild(f);e=document.createElement("ul");e.className="nav nav-stacked nav-pills";r.appendChild(e);l=+n.currentPage.Id;o(i,+l,e,!1,u);for(a in n.searchIndex)+a!=+l&&o(i,+a,e,!0,u)}}function c(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}var n=window.svgpublish||{},u,f,e,i;if(n.shapes&&n.enableSearch){$("#shape-search").show();let t=null;if(n.enablePropertySearchFilter){let i={};for(u in n.searchIndex){const t=n.searchIndex[u];for(f in t)for(e in t[f])i[e]=1}t=h(Object.keys(i));document.querySelector("#search-property-filter").appendChild(t);$(t).selectpicker();$(t).on("changed.bs.select",function(){r($("#search-term").val())})}$("#search-term").on("keyup",function(){r($("#search-term").val())});i=c("term");i&&($("#search-term").val(i),r(i))}}),function(n){n.selectionChanged=$.Callbacks()}(window.svgpublish);$(document).ready(function(){function i(t){let r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(var u=0;u<r.children.length;++u){let n=r.children[u];if(n.textContent.indexOf(i.ContainerText)>=0)return n}}function f(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function u(){var t=f("shape");t&&n.highlightShape(t)}var n=window.svgpublish,t,r;if(n.shapes&&n.enableSelection){t=!n.enableBoxSelection;r="http://www.w3.org/2000/svg";n.setSelection=function(u){var f,e,o;if(n.selectedShapeId&&n.selectedShapeId!==u){let r=i(n.selectedShapeId);if(r)if(t)r.removeAttribute("filter");else{let n=document.getElementById("vp-selection-box");n&&n.remove();let t=document.getElementById("vp-hover-box");t&&t.remove()}delete n.selectedShapeId}if(!n.selectedShapeId||n.selectedShapeId!==u){n.selectedShapeId=u;n.selectionChanged.fire(u);let s=i(u);if(s)if(t)s.setAttribute("filter","url(#select)");else{let i=document.getElementById("vp-hover-box");i&&i.remove();let u=document.getElementById("vp-selection-box");u&&u.remove();f=s.getBBox();n.filter&&n.filter.enableDilate&&(e=+n.filter.dilate||4,f.x-=e/2,f.width+=e,f.y-=e/2,f.height+=e);o=n.filter&&n.filter.selectColor||"rgba(255, 255, 0, 0.4)";let t=document.createElementNS(r,"rect");t.id="vp-selection-box";t.setAttribute("x",f.x);t.setAttribute("y",f.y);t.setAttribute("width",f.width);t.setAttribute("height",f.height);t.style.fill=n.filter&&n.filter.mode==="normal"?"none":o;t.style.stroke=o;t.style.strokeWidth=e||0;s.appendChild(t)}}};$("div.svg").on("click",function(){n.setSelection()});$.each(n.shapes,function(t){let r=n.shapes[t];if(r.DefaultLink||r.Props&&Object.keys(r.Props).length||r.Links&&r.Links.length||r.Comment||r.PopoverMarkdown||r.SidebarMarkdown||r.TooltipMarkdown){let r=i(t);if(!r)return;r.style.cursor="pointer";r.addEventListener("click",function(i){i.stopPropagation();n.setSelection(t)})}});n.highlightShape=function(t){$("#"+t).fadeTo(300,.3).fadeTo(300,1).fadeTo(300,.3).fadeTo(300,1);n.setSelection(t)};u();$(window).on("hashchange",u)}});$(document).ready(function(){function a(){return e>600}function f(n,u){n?($("#diagram-sidebar").show().animate({width:t+"px"},u),$("#sidebar-toggle").addClass("rotated").animate(r?{right:t-2+"px"}:{left:t-2+"px"},u)):($("#diagram-sidebar").animate({width:"0"},u,function(){$("#diagram-sidebar").hide()}),$("#sidebar-toggle").removeClass("rotated").animate(r?{right:"0"}:{left:"0"},u));a()&&i&&(i.setItem("DiagramSidebarVisible",n?"1":"0"),i.setItem("DiagramSidebarWidth",t))}function v(t,i){let r=t?n.shapes[t]:n.currentPageShape,u=r&&r.SidebarMarkdown||n.enableSidebarMarkdown&&n.sidebarMarkdown||"",e=u&&marked(Mustache.render(u,r||{})).trim()||"";$("#sidebar-html").html(e);i&&f(!!r,400)}function y(t){v(t,n.showSidebarOnSelection)}var n=window.svgpublish||{},r,t,i,o,e,l,s,u,h,c;if(n.enableSidebar){r=n.rightSidebar;$("body").addClass(r?"vp-sidebar-right":"vp-sidebar-left");t=+n.sidebarDefaultWidth||400;$("#sidebar-toggle").on("dragstart",function(){return!1});try{i=window.localStorage}catch(p){}o=i?parseInt(i.getItem("DiagramSidebarWidth")):0;o>0&&(t=o);e=$(window).width()-$("#sidebar-toggle").width()-40;t>=e&&(t=e);l=i?i.getItem("DiagramSidebarVisible")==="1":0;$("#sidebar-toggle").show();a()&&!n.alwaysHideSidebar&&(f(l,0),v(null,!1));h=function(n){if(u){var t=s+(r?-1:1)*(n.clientX-u);t<0&&(t=0);$("#diagram-sidebar").width(t+"px").show();$("#sidebar-toggle").css(r?"right":"left",t+"px")}};c=function(n){$("iframe").css("pointer-events","auto");$("body").css("user-select",null);$(document).off("mousemove",h);$(document).off("mouseup",c);var i=(r?-1:1)*(n.clientX-u)+s;i<0&&(i=0);Math.abs(n.clientX-u)<20?f(i<20,400):(t=i,f(!0,0));u=null};$("#sidebar-toggle").on("mousedown",function(n){if(n.button===0){$("iframe").css("pointer-events","none");$("body").css("user-select","none");u=n.clientX;s=$("#diagram-sidebar").width();$(document).on("mousemove",h).on("mouseup",c)}});n.showSidebar=f;n.selectionChanged.add(y)}}),function(n){n.fn.extend({panzoom:function(n){return this.each(function(){t(this,n)})}});var t=function(t,i){function k(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function st(n,t,i,r){var u=n/t;return(n>i||t<r)&&(n=i,t=Math.floor(n/u)),(t>r||n<i)&&(t=r,n=Math.floor(t*u)),{width:n,height:t}}function s(){return n(t).find("#viewport").get(0)}function d(){var i,u,c;if(b){var o=b.split(" "),s=parseFloat(o[2]),l=parseFloat(o[3]),f=n(t).width(),e=n(t).height();if(typeof r.createSVGMatrix=="function"){i=r.createSVGMatrix();u=st(s,l,f,e);u.width<f&&(i=i.translate((f-u.width)/2,0));u.height<e&&(i=i.translate(0,(e-u.height)/2,0));i=i.scale(u.width/s);c=n(r).find("#viewport").get(0);h(c,i);n(window).on("hashchange",g);g()}}}function g(){var t=k("shape"),n;t&&nt(t);n=k("zoom");n&&l(n)}function nt(n){var u=tt(),f=ht(n),e=s(),t=e.getCTM(),i,r;f&&u&&(i=f.matrixTransform(t.inverse()),r=u.matrixTransform(t.inverse()),h(e,t.translate(r.x-i.x,r.y-i.y)))}function ht(n){var u=r.getElementById(n),t,i;return u?(t=u.getBoundingClientRect(),i=r.createSVGPoint(),i.x=(t.left+t.right)/2,i.y=(t.top+t.bottom)/2,i):undefined}function p(n){var t=n.originalEvent.touches,i,r,u;return t&&t.length===2?(i=e(t[0].pageX,t[0].pageY),r=e(t[1].pageX,t[1].pageY),e((i.pageX+r.pageX)/2,(i.pageY+r.pageY)/2)):(u=n.originalEvent?n.originalEvent.touches?n.originalEvent.touches[0]:n.originalEvent:n,e(u.pageX,u.pageY))}function c(i){var u=r.createSVGPoint();return u.x=i.pageX-n(t).offset().left,u.y=i.pageY-n(t).offset().top,u}function tt(){var i=r.createSVGPoint();return i.x=n(t).width()/2,i.y=n(t).height()/2,i}function h(n,i){var u="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";n.setAttribute("transform",u);navigator.userAgent.match(/trident|edge/i)&&typeof r.style.strokeMiterlimit!="undefined"&&(r.style.strokeMiterlimit=r.style.strokeMiterlimit!=="3"?"3":"2");y&&y(t)}function it(n){var t,i,r;ft&&((t=window.svgpublish,t&&t.enableZoomCtrl&&!n.ctrlKey)||t&&t.enableZoomShift&&!n.shiftKey||(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=n.originalEvent.wheelDelta?n.originalEvent.wheelDelta/360:n.originalEvent.detail/-9,r=Math.pow(1+et,i),l(r,n)))}function l(n,t){var o=t?c(p(t)):tt(),i=s(),u=o.matrixTransform(i.getCTM().inverse()),e=r.createSVGMatrix().translate(u.x,u.y).scale(n).translate(-u.x,-u.y);h(i,i.getCTM().multiply(e));f||(f=i.getCTM().inverse());f=f.multiply(e.inverse())}function e(n,t){return{pageX:n,pageY:t}}function w(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)}function rt(n){var i,t,r,y;if(u){if(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=p(n),u==="pinch"&&(t=n.originalEvent.touches,t&&t.length===2)){var k=e(t[0].pageX,t[0].pageY),d=e(t[1].pageX,t[1].pageY),b=w(k,d);l(b/v,n);v=b;r=c(i).matrixTransform(f);h(s(),f.inverse().translate(r.x-o.x,r.y-o.y))}u==="down"&&w(i,a)>ot&&(u="pan");u==="pan"&&(y=c(i).matrixTransform(f),h(s(),f.inverse().translate(y.x-o.x,y.y-o.y)))}}function ct(n){return n.which!==1?!1:(n.preventDefault&&n.preventDefault(),ut(n))}function ut(n){var t=n.originalEvent.touches,r,h,i;if(t&&t.length===2)r=e(t[0].pageX,t[0].pageY),h=e(t[1].pageX,t[1].pageY),v=w(r,h),u="pinch";else{if(i=window.svgpublish,i&&i.twoFingersTouch&&t){u=null;return}u="down"}f=s().getCTM().inverse();a=p(n);o=c(a).matrixTransform(f)}function lt(n){(u==="pan"||u==="pinch")&&n.stopPropagation&&n.stopPropagation();u=null}var ft=1,et=.5,ot=3,u=null,o=null,a=null,f=null,v=null,y=null,r=i.svg,b=i.viewBox;d();n.contains(document,r)||(r=n(t).html(r).find("svg").get(0));navigator.userAgent.match(/trident|edge/i)&&(SVGElement.prototype.getBoundingClientRect=function(){var f=r.createSVGPoint(),n=this.getBBox(),e=this.getScreenCTM(),t,u,i;return f.x=n.x,f.y=n.y,t=f.matrixTransform(e),u=r.createSVGPoint(),u.x=n.x+n.width,u.y=n.y+n.height,i=u.matrixTransform(e),{left:t.x,top:t.y,right:i.x,bottom:i.y,width:i.x-t.x,height:i.y-t.y}});n(t).on("mousedown",ct).on("mousemove",rt).on("touchstart",ut).on("touchmove",rt);if(n(t).get(0).addEventListener("click",lt,!0),navigator.userAgent.toLowerCase().indexOf("firefox")>=0)n(t).on("DOMMouseScroll",it);else n(t).on("mousewheel",it);return{zoom:l,reset:d,focus:nt,onViewChanged:function(n){y=n}}}}(jQuery);$(document).ready(function(){function i(t){let r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(var u=0;u<r.children.length;++u){let n=r.children[u];if(n.textContent.indexOf(i.ContainerText)>=0)return n}}var n=window.svgpublish||{},t;n.shapes&&n.enableTooltips&&(n.tooltipKeepOnHover&&(t=$.fn.tooltip.Constructor.prototype.leave,$.fn.tooltip.Constructor.prototype.leave=function(n){var i=n instanceof this.constructor?n:$(n.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),r,u;if(t.call(this,n),n.currentTarget){r=$(n.currentTarget).data("bs.tooltip").tip();u=i.timeout;r.one("mouseenter",function(){clearTimeout(u);r.one("mouseleave",function(){$.fn.tooltip.Constructor.prototype.leave.call(i,i)})})}}),$.each(n.shapes,function(t,r){var e,u,h;const f=$(i(t)),o=r.TooltipMarkdown||n.enableTooltipMarkdown&&n.tooltipMarkdown||r.Comment||"",s=o&&marked(Mustache.render(o,r)).trim(),c=n.tooltipPlacement||"auto top";if(s){if(e={container:"body",html:!0,title:s,placement:c},n.tooltipTrigger&&(e.trigger=n.tooltipTrigger),(n.tooltipTimeout||n.tooltipKeepOnHover)&&(e.delay={show:n.tooltipTimeoutShow||undefined,hide:n.tooltipTimeoutHide||n.tooltipKeepOnHover?200:undefined}),f.tooltip(e),n.processNested)f.on("show.bs.tooltip",function(){f.parents().tooltip("hide")});if(n.tooltipUseMousePosition){u={};$.fn.tooltip.Constructor.prototype.update=function(n){var c,r,l;u.pageX=n.pageX;u.pageY=n.pageY;var f=this.tip(),i=this.getPosition(),e=f[0].offsetWidth,o=f[0].offsetHeight,t=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,h=s.test(t);h&&(t=t.replace(s,"")||"top");h&&(c=t,r=this.getPosition(this.$viewport),t=t=="bottom"&&i.bottom+o>r.bottom?"top":t=="top"&&i.top-o<r.top?"bottom":t=="right"&&i.right+e>r.width?"left":t=="left"&&i.left-e<r.left?"right":t,f.removeClass(c).addClass(t));l=this.getCalculatedOffset(t,i,e,o);this.applyPlacement(l,t)};h=$.fn.tooltip.Constructor.prototype.getPosition;$.fn.tooltip.Constructor.prototype.getPosition=function(n){return n||typeof u.pageX!="number"||typeof u.pageY!="number"?h.call(this,n):{left:u.pageX,top:u.pageY,width:1,height:1}};f.on("mousemove",function(n){f.data("bs.tooltip").update(n)})}}}),n.tooltipOutsideClick&&$("div.svg").mouseup(function(t){$.each(n.shapes,function(n){var i=$("#"+n);i.is(t.target)||i.has(t.target).length!==0||$(".tooltip").has(t.target).length!==0||(((i.tooltip("hide").data("bs.tooltip")||{}).inState||{}).click=!1)})}))});
//# sourceMappingURL=vp-script-1.3.2.min.js.map