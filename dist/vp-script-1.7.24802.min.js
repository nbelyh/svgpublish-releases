(function(n){function o(n){const t=n.match(/url\("(.*)"\)/);return t&&t[1]}function s(n,t,i){const r=document.querySelector(n);if(r){const n=r.cloneNode(!0);n.id=t;n.style.stroke=i;n.style.fill=i;r.parentElement.appendChild(n)}}function f(n){const t=document.getElementById(n);t&&t.parentElement.removeChild(t)}var h="http://www.w3.org/2000/svg",t=n.settings||{},i,r,e,u;n.diagramData=n.shapes;n.selectionChanged=$.Callbacks();t.enableAutoFrameHeight&&(i=window.top.document.getElementById(window.name),i&&(r=i.parentElement,e=r.getBoundingClientRect(),r.style.height="calc(100vh - "+e.top+"px)"));u=t.enableBoxSelection;n.setConnHighlight=function(i,r){var f,u;if(n.removeConnHighlight(i),f=i.querySelector("path"),f){const n=getComputedStyle(f);if(u=f.cloneNode(!0),u.id="vp-path-"+i.id,u.style.stroke=r,t.enableConnDilate){const i=parseFloat(n.strokeWidth)+(+t.connDilate||2);u.style.strokeWidth=i}u.style.pointerEvents="none";const e=o(n.markerEnd);e&&(s(e,"vp-marker-end-"+i.id,r),u.style.markerEnd='url("#vp-marker-end-'+i.id+'")');const h=o(n.markerStart);h&&(s(h,"vp-marker-start-"+i.id,r),u.style.markerStart='url("#vp-marker-start-'+i.id+'")');i.appendChild(u)}};n.removeConnHighlight=function(n){f("vp-path-"+n.id);f("vp-marker-end-"+n.id);f("vp-marker-start-"+n.id)};n.setShapeHighlight=function(i,r,f){var o,e;if(u){n.removeShapeHighlight(i);var s=i.getBBox(),c=s.x,l=s.y,a=s.width,v=s.height;t.enableDilate&&(o=+t.dilate||4,c-=o/2,a+=o,l-=o/2,v+=o);e=document.createElementNS(h,"rect");e.id="vp-box-"+i.id;e.setAttribute("x",c);e.setAttribute("y",l);e.setAttribute("width",a);e.setAttribute("height",v);e.style.fill=t.selectionMode==="normal"?"none":f;e.style.stroke=f;e.style.strokeWidth=o||0;e.style.pointerEvents="none";i.appendChild(e)}else i.setAttribute("filter",r)};n.removeShapeHighlight=function(n){if(u){const t=document.getElementById("vp-box-"+n.id);t&&t.parentElement.removeChild(t)}else n.removeAttribute("filter")}})(window.svgpublish),function(n){n.fn.extend({panzoom:function(n){return this.each(function(){t(this,n)})}});var t=function(t,i){function k(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function st(n,t,i,r){var u=n/t;return(n>i||t<r)&&(n=i,t=Math.floor(n/u)),(t>r||n<i)&&(t=r,n=Math.floor(t*u)),{width:n,height:t}}function s(){return n(t).find("#viewport").get(0)}function d(){var i,u,c;if(b){var o=b.split(" "),s=parseFloat(o[2]),l=parseFloat(o[3]),f=n(t).width(),e=n(t).height();if(typeof r.createSVGMatrix=="function"){i=r.createSVGMatrix();u=st(s,l,f,e);u.width<f&&(i=i.translate((f-u.width)/2,0));u.height<e&&(i=i.translate(0,(e-u.height)/2,0));i=i.scale(u.width/s);c=n(r).find("#viewport").get(0);h(c,i);n(window).on("hashchange",g);g()}}}function g(){var t=k("shape"),n;t&&nt(t);n=k("zoom");n&&l(n)}function nt(n){var u=tt(),f=ht(n),e=s(),t=e.getCTM(),i,r;f&&u&&(i=f.matrixTransform(t.inverse()),r=u.matrixTransform(t.inverse()),h(e,t.translate(r.x-i.x,r.y-i.y)))}function ht(n){var u=r.getElementById(n),t,i;return u?(t=u.getBoundingClientRect(),i=r.createSVGPoint(),i.x=(t.left+t.right)/2,i.y=(t.top+t.bottom)/2,i):undefined}function p(n){var t=n.originalEvent.touches,i,r,u;return t&&t.length===2?(i=e(t[0].pageX,t[0].pageY),r=e(t[1].pageX,t[1].pageY),e((i.pageX+r.pageX)/2,(i.pageY+r.pageY)/2)):(u=n.originalEvent?n.originalEvent.touches?n.originalEvent.touches[0]:n.originalEvent:n,e(u.pageX,u.pageY))}function c(i){var u=r.createSVGPoint();return u.x=i.pageX-n(t).offset().left,u.y=i.pageY-n(t).offset().top,u}function tt(){var i=r.createSVGPoint();return i.x=n(t).width()/2,i.y=n(t).height()/2,i}function h(n,i){var u="matrix("+i.a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")";n.setAttribute("transform",u);navigator.userAgent.match(/trident|edge/i)&&typeof r.style.strokeMiterlimit!="undefined"&&(r.style.strokeMiterlimit=r.style.strokeMiterlimit!=="3"?"3":"2");y&&y(t)}function it(n){var t,i,r;ft&&((t=window.svgpublish,t&&t.settings&&t.settings.enableZoomCtrl&&!n.ctrlKey)||t&&t.settings&&t.settings.enableZoomShift&&!n.shiftKey||(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=n.originalEvent.wheelDelta?n.originalEvent.wheelDelta/360:n.originalEvent.detail/-9,r=Math.pow(1+et,i),l(r,n)))}function l(n,t){var o=t?c(p(t)):tt(),i=s(),u=o.matrixTransform(i.getCTM().inverse()),e=r.createSVGMatrix().translate(u.x,u.y).scale(n).translate(-u.x,-u.y);h(i,i.getCTM().multiply(e));f||(f=i.getCTM().inverse());f=f.multiply(e.inverse())}function e(n,t){return{pageX:n,pageY:t}}function w(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)}function rt(n){var i,t,r,y;if(u){if(n.preventDefault&&n.preventDefault(),n.returnValue=!1,i=p(n),u==="pinch"&&(t=n.originalEvent.touches,t&&t.length===2)){var k=e(t[0].pageX,t[0].pageY),d=e(t[1].pageX,t[1].pageY),b=w(k,d);l(b/v,n);v=b;r=c(i).matrixTransform(f);h(s(),f.inverse().translate(r.x-o.x,r.y-o.y))}u==="down"&&w(i,a)>ot&&(u="pan");u==="pan"&&(y=c(i).matrixTransform(f),h(s(),f.inverse().translate(y.x-o.x,y.y-o.y)))}}function ct(n){return n.which!==1?!1:(n.preventDefault&&n.preventDefault(),ut(n))}function ut(n){var t=n.originalEvent.touches,r,h,i;if(t&&t.length===2)r=e(t[0].pageX,t[0].pageY),h=e(t[1].pageX,t[1].pageY),v=w(r,h),u="pinch";else{if(i=window.svgpublish,i&&i.settings&&i.settings.twoFingersTouch&&t){u=null;return}u="down"}f=s().getCTM().inverse();a=p(n);o=c(a).matrixTransform(f)}function lt(n){(u==="pan"||u==="pinch")&&n.stopPropagation&&n.stopPropagation();u=null}var ft=1,et=.5,ot=3,u=null,o=null,a=null,f=null,v=null,y=null,r=i.svg,b=i.viewBox;d();n.contains(document,r)||(r=n(t).html(r).find("svg").get(0));navigator.userAgent.match(/trident|edge/i)&&(SVGElement.prototype.getBoundingClientRect=function(){var f=r.createSVGPoint(),n=this.getBBox(),e=this.getScreenCTM(),t,u,i;return f.x=n.x,f.y=n.y,t=f.matrixTransform(e),u=r.createSVGPoint(),u.x=n.x+n.width,u.y=n.y+n.height,i=u.matrixTransform(e),{left:t.x,top:t.y,right:i.x,bottom:i.y,width:i.x-t.x,height:i.y-t.y}});n(t).on("mousedown",ct).on("mousemove",rt).on("touchstart",ut).on("touchmove",rt);if(n(t).get(0).addEventListener("click",lt,!0),navigator.userAgent.toLowerCase().indexOf("firefox")>=0)n(t).on("DOMMouseScroll",it);else n(t).on("mousewheel",it);return{zoom:l,reset:d,focus:nt,onViewChanged:function(n){y=n}}}}(jQuery),function(n){function y(n){return n==="Swimlane"?l:n==="Phase"?a:v}function s(n){for(var e,r,o="",f=0;f<t.length;++f)if(e=t[f],r=e.info,r.ContainerCategories&&r.ContainerText){var c=e.shape,u=c.getBoundingClientRect(),s=n.clientX,h=n.clientY;u.left<=s&&s<=u.right&&u.top<=h&&h<=u.bottom&&(o+="<div>"+y(r.ContainerCategories)+": <strong>"+r.ContainerText+"<\/strong><\/div>")}i.innerHTML=o}var h="http://www.w3.org/2000/svg",c=n.settings||{},t,f,o,e,r,u;if(n.shapes&&c.enableContainerTip){var i=document.getElementById("container-tip"),l=i.dataset.labelswimlane||"Swimlane",a=i.dataset.labelphase||"Phase",v=i.dataset.labelcontainer||"Container";t=[];for(f in n.shapes)o=document.getElementById(f),e=n.shapes[f],e.IsContainer&&t.push({shape:o,info:e});r=0;u=0;t.forEach(function(n){var t=n.shape.getBBox();r<t.width&&(r=t.width);u<t.height&&(u=t.height)});t.forEach(function(n){var e=n.info,f=n.shape,o=e.ContainerCategories,i,t;o&&((o==="Swimlane"||o==="Phase")&&(i=f.getBBox(),t=document.createElementNS(h,"rect"),t.setAttribute("x",i.x),t.setAttribute("y",i.y),e.ContainerCategories==="Swimlane"?t.setAttribute("height",r):t.setAttribute("width",i.width),e.ContainerCategories==="Phase"?t.setAttribute("height",u):t.setAttribute("height",i.height),f.appendChild(t)),f.addEventListener("mousemove",s),f.addEventListener("mouseout",s))})}}(window.svgpublish);window.svgpublish&&(window.svgpublish.diagramData=window.svgpublish.shapes),function(n){function r(t){var u=document.getElementById(t),i=n.shapes[t],r,f;if(!i||!i.IsContainer)return u;if(!i.ContainerText)return null;for(r=0;r<u.children.length;++r)if(f=u.children[r],f.textContent.indexOf(i.ContainerText)>=0)return f}var i="http://www.w3.org/2000/svg",t=n.settings||{};$.each(n.shapes,function(n,u){var o=r(n),s=u.ContentMarkdown||t.enableContentMarkdown&&t.contentMarkdown||"",h=s&&marked.parseInline(Mustache.render(s,u)).trim();if(h){var e=o.getBBox(),c=e.x,l=e.y,a=e.width,v=e.height,f=document.createElementNS(i,"foreignObject");f.setAttribute("x",c);f.setAttribute("y",l);f.setAttribute("width",a);f.setAttribute("height",v);o.appendChild(f);f.innerHTML=h}})}(window.svgpublish),function(n){function i(t){var u=document.getElementById(t),i=n.shapes[t],r,f;if(!i||!i.IsContainer)return u;if(!i.ContainerText)return null;for(r=0;r<u.children.length;++r)if(f=u.children[r],f.textContent.indexOf(i.ContainerText)>=0)return f}var t=n.settings||{};n.shapes&&t.enableHover&&$.each(n.shapes,function(r){var u=n.shapes[r],f,e;if(u.DefaultLink||u.Props&&Object.keys(u.Props).length||u.Links&&u.Links.length||u.Comment||u.PopoverMarkdown||u.SidebarMarkdown||u.TooltipMarkdown){if(f=i(r),!f)return;e=t.enableFollowHyperlinks&&u.DefaultLink?"url(#hyperlink)":"url(#hover)";f.addEventListener("mouseover",function(){if(!n.highlightedShapeIds[r]){var i=t.hyperlinkColor||"rgba(0, 0, 255, 0.2)",o=t.hoverColor||"rgba(255, 255, 0, 0.2)",s=t.enableFollowHyperlinks&&u.DefaultLink?i:o;n.setShapeHighlight(f,e,s)}});f.addEventListener("mouseout",function(){n.highlightedShapeIds[r]||n.removeShapeHighlight(f,!1)})}})}(window.svgpublish),function(n){function s(t){return n.layers.filter(function(n){return n.Index===t})[0]}function r(){n.layers&&n.layers.length&&$.each(n.shapes,function(t,i){if(i.Layers&&i.Layers.length){var u=n.layers.some(function(n){return n.Visible&&i.Layers.indexOf(n.Index)>=0}),r=$("#"+t);u?r.show():r.hide()}})}function h(n){var t=Intl.Collator(undefined,{numeric:!0,sensitivity:"base"});return n.map(function(n){return n}).sort(function(n,i){return t.compare(n.Name,i.Name)})}function u(i){var u=new RegExp("("+i.replace(/([\\.+*?[^\]$(){}=!<>|:])/g,"\\$1")+")","gi"),f=$("<table class='table borderless' />"),l=o?h(n.layers):n.layers,e,c;$.each(l,function(n,e){if(!i||u.test(e.Name)){var h=i?e.Name.replace(u,"<span class='search-hilight'>$1<\/span>"):e.Name,o=t?$("<input type='checkbox' data-layer='"+e.Index+"' "+(e.Visible?"checked":"")+"><span style='margin-left:1em'>"+h+"<\/span><\/input>"):$("<div class='checkbox' style='margin-bottom: 0'><label><input type='checkbox' data-layer='"+e.Index+"' "+(e.Visible?"checked":"")+">"+h+"<\/label><\/div>"),c=t?o:o.find("input");c.on(t?"change.bootstrapSwitch":"click",function(n){var i=$(n.target).data("layer"),t=s(i);t.Visible=!t.Visible;r()});f.append($("<tr>").append($("<td>").append(o)))}});$("#panel-layers").html(f);t&&(e=$("#panel-layers").data("ontext")||"ON",c=$("#panel-layers").data("offtext")||"OFF",$("#panel-layers").find("input").bootstrapSwitch({size:"small",onText:e,offText:c,labelWidth:0}))}function f(t){return n.layers.filter(function(n){return n.Name===t})[0]}var i=n.settings||{};if(n.layers&&i.enableLayers){$("#shape-layers").show();var t=i.enableLayerToggles,e=i.enableLayerShowAll,o=i.enableLayerSort;if(e){$("#layer-show-all").on("click",function(){n.layers&&n.layers.forEach(function(t){n.setLayerVisible(t.Name,!0)})});$("#layer-hide-all").on("click",function(){n.layers&&n.layers.forEach(function(t){n.setLayerVisible(t.Name,!1)})})}n.isLayerVisible=function(n){var t=f(n);return t&&t.Visible};n.setLayerVisible=function(n,i){var e=f(n),u,o;e&&(u=$("#panel-layers").find("input[data-layer='"+e.Index+"']"),u.length?t?(o=u.bootstrapSwitch("state"),!!o!=!!i&&u.bootstrapSwitch("toggleState")):(u.prop("checked",i),e.Visible=i,r()):(e.Visible=i,r()))};u("");$("#search-layer").on("keyup",function(){return u($("#search-layer").val()),!1})}}(window.svgpublish),function(n){function r(t){var u=document.getElementById(t),i=n.shapes[t],r,f;if(!i||!i.IsContainer)return u;if(!i.ContainerText)return null;for(r=0;r<u.children.length;++r)if(f=u.children[r],f.textContent.indexOf(i.ContainerText)>=0)return f}function i(t){var i,r;if(t.Address)return t.Address;if(i=t.PageId,i>=0&&n.pages&&(r=n.pages.filter(function(n){return n.Id===i})[0],r)){var u=location.pathname,e=u.replace(u.substring(u.lastIndexOf("/")+1),r.FileName),f=document.location.protocol+"//"+document.location.host+e;return t.ShapeId&&(f+="#?shape="+t.ShapeId),t.Zoom&&(f+=(t.ShapeId?"&":"#?")+"zoom="+t.Zoom),f}return"#"}function u(n){return n.Description?n.Description:n.SubAddress?n.Address?n.Address+"["+n.SubAddress+"]":n.SubAddress:n.Address}function f(t){var f=n.shapes[t],o=$("#panel-links").data("labelnolinks")||"No Shape Links",r=$("<span>"+o+"<\/span>"),e;f&&(r=$("<table class='table borderless' />"),e=r.append($("<tbody />")),$.each(f.Links,function(t,r){var o=i(r),s=u(r),f=$("<a />").attr("href",o).text(s);r.Address&&n.openHyperlinksInNewWindow&&f.attr("target","_blank");e.append($("<tr />").append($("<td />").append(f)))}));$("#panel-links").html(r)}var t=n.settings||{};n.shapes&&($("#shape-links").show(),t.enableLinks&&n.selectionChanged.add(f),t.enableFollowHyperlinks)&&$.each(n.shapes,function(u){var e=n.shapes[u],o=e.DefaultLink&&e.Links[e.DefaultLink-1],s=o&&i(o),f;if(s){if(f=r(u),!f)return;f.style.cursor="pointer";f.addEventListener("click",function(n){(n.stopPropagation(),n&&n.ctrlKey)||(o.Address&&t.openHyperlinksInNewWindow||n.shiftKey?window.open(s,"_blank"):document.location=s)})}})}(window.svgpublish),function(n){function r(n){var t=Intl.Collator(undefined,{numeric:!0,sensitivity:"base"});return n.map(function(n){return n}).sort(function(n,i){return t.compare(n.Name,i.Name)})}function i(i){var u=$('<ul class="nav nav-stacked nav-pills"/>'),f=t.enableLayerSort?r(n.pages):n.pages;$.each(f,function(t,r){var e=new RegExp("("+i.replace(/([\\.+*?[^]$(){}=!<>|:])/g,"\\$1")+")","gi");if(!i||e.test(r.Name)){var f=location.pathname,s=f.replace(f.substring(f.lastIndexOf("/")+1),r.FileName),h=document.location.protocol+"//"+document.location.host+s,c=i?r.Name.replace(e,"<span class='search-hilight'>$1<\/span>"):r.Name,l=$("<a />").attr("href",h).html(c),o=$("<li />");r.Id===n.currentPage.Id&&o.addClass("active");o.append(l).appendTo(u)}});$("#panel-pages").html(u)}var t=n.settings||{};if(n.pages&&t.enablePages){$("#shape-pages").show();i("");$("#search-page").on("keyup",function(){return i($("#search-page").val()),!1})}}(window.svgpublish),function(n){function r(t){var u=document.getElementById(t),i=n.shapes[t],r,f;if(!i||!i.IsContainer)return u;if(!i.ContainerText)return null;for(r=0;r<u.children.length;++r)if(f=u.children[r],f.textContent.indexOf(i.ContainerText)>=0)return f}var t=n.settings||{},i;n.shapes&&t.enablePopovers&&(t.popoverKeepOnHover&&(i=$.fn.popover.Constructor.prototype.leave,$.fn.popover.Constructor.prototype.leave=function(n){var t=n instanceof this.constructor?n:$(n.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),r,u;if(i.call(this,n),n.currentTarget){r=$(n.currentTarget).data("bs.popover").tip();u=t.timeout;r.one("mouseenter",function(){clearTimeout(u);r.one("mouseleave",function(){$.fn.popover.Constructor.prototype.leave.call(t,t)})})}}),$.each(n.shapes,function(n,i){var o=$(r(n)),s=i.PopoverMarkdown||t.enablePopoverMarkdown&&t.popoverMarkdown||i.Comment||"",f=/([\s\S]*)^\s*----*\s*$([\s\S]*)/m.exec(s),h=f&&f[1]||"",c=f&&f[2]||s,v=h&&marked.parse(Mustache.render(h,i)).trim()||"",l=c&&marked.parse(Mustache.render(c,i)).trim()||"",y=t.popoverPlacement||"auto top",e,u,a;if(l&&(e={container:"body",html:!0,title:v,content:l,placement:y},t.popoverTrigger&&(e.trigger=t.popoverTrigger),(t.popoverTimeout||t.popoverKeepOnHover)&&(e.delay={show:t.popoverTimeoutShow||undefined,hide:t.popoverTimeoutHide||t.popoverKeepOnHover?200:undefined}),o.popover(e),t.popoverUseMousePosition)){u={};$.fn.popover.Constructor.prototype.update=function(n){var c,r,l;u.pageX=n.pageX;u.pageY=n.pageY;var f=this.tip(),i=this.getPosition(),e=f[0].offsetWidth,o=f[0].offsetHeight,t=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,h=s.test(t);h&&(t=t.replace(s,"")||"top");h&&(c=t,r=this.getPosition(this.$viewport),t=t=="bottom"&&i.bottom+o>r.bottom?"top":t=="top"&&i.top-o<r.top?"bottom":t=="right"&&i.right+e>r.width?"left":t=="left"&&i.left-e<r.left?"right":t,f.removeClass(c).addClass(t));l=this.getCalculatedOffset(t,i,e,o);this.applyPlacement(l,t)};a=$.fn.popover.Constructor.prototype.getPosition;$.fn.popover.Constructor.prototype.getPosition=function(n){return n||typeof u.pageX!="number"||typeof u.pageY!="number"?a.call(this,n):{left:u.pageX,top:u.pageY,width:1,height:1}};o.on("mousemove",function(n){o.data("bs.popover").update(n)})}}),t.popoverOutsideClick&&$("div.svg").mouseup(function(t){$.each(n.shapes,function(n){var i=$("#"+n);i.is(t.target)||i.has(t.target).length!==0||$(".popover").has(t.target).length!==0||(((i.popover("hide").data("bs.popover")||{}).inState||{}).click=!1)})}))}(window.svgpublish),function(n){function r(r){var s=n.shapes[r],h=$("#panel-props").data("labelnodata")||"No Shape Data",e=$("<span>"+h+"<\/span>"),o,u,f;if(s){e=$("<table class='table table-bordered table-striped' />");var c=e.append($("<thead />")),l=e.append($("<tbody />")),a=$("#panel-props").data("labelproperty")||"Property",v=$("#panel-props").data("labelvalue")||"Value";c.append($("<tr />").append($("<th />").text(a)).append($("<th />").text(v)));for(o in s.Props)i.length>0&&i.indexOf(o)<0||(u=s.Props[o]||"",typeof u=="string"&&(u.indexOf("https://")>=0||u.indexOf("http://")>=0)&&(f=document.createElement("a"),f.href=u,t.openHyperlinksInNewWindow&&(f.target="_blank"),f.textContent=u,u=f.outerHTML),l.append($("<tr />").append($("<td />").text(o)).append($("<td />").html(u))))}$("#panel-props").html(e)}var t=n.settings||{},i;n.shapes&&t.enableProps&&(i=t.selectedProps&&t.selectedProps.split(",")||[],$("#shape-props").show(),n.selectionChanged.add(r))}(window.svgpublish),function(n){function l(n){return n.replace(/([\\.+*?[^]$(){}=!<>|:])/g,"\\$1")}function a(n){var t=document.createElement("select");return t.className="selectpicker",t.setAttribute("multiple","multiple"),t.setAttribute("data-container","body"),t.setAttribute("data-live-search",!0),t.setAttribute("data-width","100%"),t.setAttribute("title","Filter by property"),n.forEach(function(n){var i=document.createElement("option");i.innerText=n;t.appendChild(i)}),t}function c(t,i,r,u,f){function d(n){return n.Id===i}var k=l(t),ot=new RegExp(k,"i"),g=n.searchIndex[i],a,o,y,rt,ut,p,h,w,b,c,ft,et;for(a in g){var nt=g[a],tt=[],v=[];for(o in nt)(!f.length||f.indexOf(o)>=0)&&(y=nt[o],ot.test(y)&&(v.push(y),tt.push(o)));if(v.length){var e=tt.join(", "),it=document.createElement("li"),s=document.createElement("a");u&&(rt=n.pages.filter(d)[0],e&&(e+=" / "),e+=rt.Name);ut=new RegExp("("+k+")","gi");p=document.createElement("div");p.innerHTML=v.join(", ").replace(ut,"<span class='search-hilight'>$1<\/span>");s.appendChild(p);e&&(h=document.createElement("div"),h.className="text-muted small",h.innerText=e,s.appendChild(h));w=document.location.protocol+"//"+document.location.host+document.location.pathname;u&&(b=n.pages.filter(d)[0],b&&(c=location.pathname,ft=c.replace(c.substring(c.lastIndexOf("/")+1),b.FileName),w=document.location.protocol+"//"+document.location.host+ft));et=w+"#?shape="+a+"&term="+encodeURIComponent(t);s.setAttribute("href",et);it.appendChild(s);r.appendChild(it)}}}function f(i){var r=t?$(t).val():[],u=document.getElementById("panel-search-results"),v,f,o,s,h,e,l,a;if(u.innerHTML="",i||r.length){v=document.createElement("hr");u.appendChild(v);f=document.createElement("p");o=document.createElement("span");o.innerText=u.getAttribute("data-searchresults");f.appendChild(o);s=document.createElement("strong");s.innerText=" "+i+" ";f.appendChild(s);h=document.createElement("span");h.innerText=r.length?" ("+r.join(", ")+"):":":";f.appendChild(h);u.appendChild(f);e=document.createElement("ul");e.className="nav nav-stacked nav-pills";u.appendChild(e);l=+n.currentPage.Id;c(i,+l,e,!1,r);for(a in n.searchIndex)+a!=+l&&c(i,+a,e,!0,r)}}function v(n){var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}var e=n.settings||{},t,r,o,u,s,h,i;if(n.shapes&&e.enableSearch){if($("#shape-search").show(),t=null,e.enablePropertySearchFilter){r={};for(o in n.searchIndex){u=n.searchIndex[o];for(s in u)for(h in u[s])r[h]=1}t=a(Object.keys(r));document.querySelector("#search-property-filter").appendChild(t);$(t).selectpicker();$(t).on("changed.bs.select",function(){f($("#search-term").val())})}$("#search-term").on("keyup",function(){f($("#search-term").val())});i=v("term");i&&($("#search-term").val(i),f(i))}}(window.svgpublish),function(n){function i(t){const r=document.getElementById(t),i=n.shapes[t];if(!i||!i.IsContainer)return r;if(!i.ContainerText)return null;for(let n=0;n<r.children.length;++n){const t=r.children[n];if(t.textContent.indexOf(i.ContainerText)>=0)return t}}function u(n){const i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.hash);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function r(){const t=u("shape");t&&n.highlightShape(t)}var t=n.settings||{};if(n.shapes&&t.enableSelection){n.highlightedShapeIds={};n.setSelection=function(r){if(n.selectedShapeId&&n.selectedShapeId!==r){const r=i(n.selectedShapeId);if(r){n.removeShapeHighlight(r);delete n.highlightedShapeIds[n.selectedShapeId];const u=n.shapes[n.selectedShapeId];if((t.enableNextShapeColor||t.enableNextConnColor)&&u.ConnectedTo)for(let r of u.ConnectedTo){if(t.enableNextShapeColor){const t=i(r.sid);n.removeShapeHighlight(t);delete n.highlightedShapeIds[r.sid]}if(t.enableNextConnColor){const t=i(r.cid);n.removeConnHighlight(t);delete n.highlightedShapeIds[r.cid]}}if((t.enablePrevShapeColor||t.enablePrevConnColor)&&u.ConnectedFrom)for(let r of u.ConnectedFrom){if(t.enablePrevShapeColor){const t=i(r.sid);n.removeShapeHighlight(t);delete n.highlightedShapeIds[r.sid]}if(t.enablePrevConnColor){const t=i(r.cid);n.removeConnHighlight(t);delete n.highlightedShapeIds[r.cid]}}}delete n.selectedShapeId}if(!n.selectedShapeId||n.selectedShapeId!==r){n.selectedShapeId=r;n.highlightedShapeIds={};n.selectionChanged.fire(r);const u=i(r);if(u){const f=n.shapes[r];if((t.enableNextShapeColor||t.enableNextConnColor)&&f.ConnectedTo)for(const r of f.ConnectedTo){if(t.enableNextShapeColor){const u=t.nextShapeColor||"rgba(255, 255, 0, 0.4)",f=i(r.sid);n.setShapeHighlight(f,"url(#next)",u);n.highlightedShapeIds[r.sid]=!0}if(t.enableNextConnColor){const u=t.nextConnColor||"rgba(255, 0, 0, 1)",f=i(r.cid);n.setConnHighlight(f,u);n.highlightedShapeIds[r.cid]=!0}}if((t.enablePrevShapeColor||t.enablePrevConnColor)&&f.ConnectedFrom)for(const r of f.ConnectedFrom){if(t.enablePrevShapeColor){const u=t.prevShapeColor||"rgba(255, 255, 0, 0.4)",f=i(r.sid);n.setShapeHighlight(f,"url(#prev)",u);n.highlightedShapeIds[r.sid]=!0}if(t.enablePrevConnColor){const u=t.prevConnColor||"rgba(255, 0, 0, 1)",f=i(r.cid);n.setConnHighlight(f,u);n.highlightedShapeIds[r.cid]=!0}}const e=t.selectionColor||"rgba(255, 255, 0, 0.4)";n.setShapeHighlight(u,"url(#select)",e);n.highlightedShapeIds[r]=!0}}};document.querySelector("div.svg").addEventListener("click",function(){n.setSelection()});for(const r in n.shapes){const u=n.shapes[r];if(u.DefaultLink||u.Props&&Object.keys(u.Props).length||u.Links&&u.Links.length||u.Comment||u.PopoverMarkdown||u.SidebarMarkdown||u.TooltipMarkdown||t.enableNextShapeColor&&u.ConnectedTo||t.enablePrevShapeColor&&u.ConnectedFrom){const t=i(r);t&&(t.style.cursor="pointer",t.addEventListener("click",function(t){t.stopPropagation();n.setSelection(r)}))}}n.highlightShape=function(t){$("#"+t).fadeTo(300,.3).fadeTo(300,1).fadeTo(300,.3).fadeTo(300,1);n.setSelection(t)};r();$(window).on("hashchange",r)}}(window.svgpublish),function(n){function v(){return o>600}function e(n,r){n?($("#diagram-sidebar").show().animate({width:t+"px"},r),$("#sidebar-toggle").addClass("rotated").animate(u?{right:t-2+"px"}:{left:t-2+"px"},r)):($("#diagram-sidebar").animate({width:"0"},r,function(){$("#diagram-sidebar").hide()}),$("#sidebar-toggle").removeClass("rotated").animate(u?{right:"0"}:{left:"0"},r));v()&&i&&(i.setItem("DiagramSidebarVisible",n?"1":"0"),i.setItem("DiagramSidebarWidth",t))}function y(t,i){var u=t?n.shapes[t]:n.currentPageShape,f=u&&u.SidebarMarkdown||r.enableSidebarMarkdown&&r.sidebarMarkdown||"",o=f&&marked.parse(Mustache.render(f,u||{})).trim()||"";$("#sidebar-html").html(o);i&&e(!!u,400)}function p(n){y(n,r.showSidebarOnSelection)}var r=n.settings||{},u,t,i,s,o,a,h,f,c,l;if(r.enableSidebar){u=r.rightSidebar;$("body").addClass(u?"vp-sidebar-right":"vp-sidebar-left");t=+r.sidebarDefaultWidth||400;$("#sidebar-toggle").on("dragstart",function(){return!1});try{i=window.localStorage}catch(w){console.warn("localStorage not available, sidebar width will not be saved")}s=i?parseInt(i.getItem("DiagramSidebarWidth")):0;s>0&&(t=s);o=$(window).width()-$("#sidebar-toggle").width()-40;t>=o&&(t=o);a=i?i.getItem("DiagramSidebarVisible")==="1":0;$("#sidebar-toggle").show();v()&&!r.alwaysHideSidebar&&(e(a,0),y(null,!1));c=function(n){if(f){var t=h+(u?-1:1)*(n.clientX-f);t<0&&(t=0);$("#diagram-sidebar").width(t+"px").show();$("#sidebar-toggle").css(u?"right":"left",t+"px")}};l=function(n){$("iframe").css("pointer-events","auto");$("body").css("user-select",null);$(document).off("mousemove",c);$(document).off("mouseup",l);var i=(u?-1:1)*(n.clientX-f)+h;i<0&&(i=0);Math.abs(n.clientX-f)<20?e(i<20,400):(t=i,e(!0,0));f=null};$("#sidebar-toggle").on("mousedown",function(n){if(n.button===0){$("iframe").css("pointer-events","none");$("body").css("user-select","none");f=n.clientX;h=$("#diagram-sidebar").width();$(document).on("mousemove",c).on("mouseup",l)}});n.showSidebar=e;n.selectionChanged.add(p)}}(window.svgpublish),function(n){function r(t){var u=document.getElementById(t),i=n.shapes[t],r,f;if(!i||!i.IsContainer)return u;if(!i.ContainerText)return null;for(r=0;r<u.children.length;++r)if(f=u.children[r],f.textContent.indexOf(i.ContainerText)>=0)return f}var t=n.settings||{},i;n.shapes&&t.enableTooltips&&(t.suppressMobileTip&&Math.min(window.screen.width,window.screen.height)<768||(t.tooltipInteractive&&(i=$.fn.tooltip.Constructor.prototype.leave,$.fn.tooltip.Constructor.prototype.leave=function(n){var t=n instanceof this.constructor?n:$(n.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type),r,u;if(i.call(this,n),n.currentTarget){r=$(n.currentTarget).data("bs.tooltip").tip();u=t.timeout;r.one("mouseenter",function(){clearTimeout(u);r.one("mouseleave",function(){$.fn.tooltip.Constructor.prototype.leave.call(t,t)})})}}),$.each(n.shapes,function(n,i){var e=$(r(n)),o=i.TooltipMarkdown||t.enableTooltipMarkdown&&t.tooltipMarkdown||i.Comment||"",s=o&&marked.parse(Mustache.render(o,i)).trim(),c=t.tooltipPlacement||"auto top",f,u,h;if(s){f={container:"body",html:!0,title:s,placement:c};switch(t.tooltipTrigger){case"mouseenter":f.trigger="hover";break;case"click":f.trigger="click";break;case"mouseenter click":f.trigger="hover click"}if((t.tooltipDelay||t.tooltipInteractive)&&(f.delay={show:t.tooltipDelayShow||undefined,hide:t.tooltipDelayHide||t.tooltipInteractive?200:undefined}),e.tooltip(f),t.processNested)e.on("show.bs.tooltip",function(){e.parents().tooltip("hide")});if(t.tooltipUseMousePosition){u={};$.fn.tooltip.Constructor.prototype.update=function(n){var c,r,l;u.pageX=n.pageX;u.pageY=n.pageY;var f=this.tip(),i=this.getPosition(),e=f[0].offsetWidth,o=f[0].offsetHeight,t=typeof this.options.placement=="function"?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,h=s.test(t);h&&(t=t.replace(s,"")||"top");h&&(c=t,r=this.getPosition(this.$viewport),t=t=="bottom"&&i.bottom+o>r.bottom?"top":t=="top"&&i.top-o<r.top?"bottom":t=="right"&&i.right+e>r.width?"left":t=="left"&&i.left-e<r.left?"right":t,f.removeClass(c).addClass(t));l=this.getCalculatedOffset(t,i,e,o);this.applyPlacement(l,t)};h=$.fn.tooltip.Constructor.prototype.getPosition;$.fn.tooltip.Constructor.prototype.getPosition=function(n){return n||typeof u.pageX!="number"||typeof u.pageY!="number"?h.call(this,n):{left:u.pageX,top:u.pageY,width:1,height:1}};e.on("mousemove",function(n){e.data("bs.tooltip").update(n)})}}}),t.tooltipOutsideClick&&$("div.svg").mouseup(function(t){$.each(n.shapes,function(n){var i=$("#"+n);i.is(t.target)||i.has(t.target).length!==0||$(".tooltip").has(t.target).length!==0||(((i.tooltip("hide").data("bs.tooltip")||{}).inState||{}).click=!1)})})))}(window.svgpublish);
//# sourceMappingURL=vp-script-1.7.24802.min.js.map